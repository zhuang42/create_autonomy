<launch>
    <!-- Use calibration file only with the real robot -->
    <arg name="simulation" default="false"/>
    <arg if="$(arg simulation)" name="calib_file" value="false"/>
    <arg unless="$(arg simulation)" name="calib_file" value="true"/>

    <include file="$(find ca_visual_odometry)/launch/cam_mapping.launch">
      <arg name="calibrated" value="$(arg calib_file)"/>
    </include>

    <!-- Recitifies image_raw -->
    <node pkg="ca_visual_odometry" type="image_rect" name="image_rect"/>

    <node pkg="viso2_ros" type="mono_odometer" name="visual_odometry" args="image:=/raspicam/image_rect" output="screen">
      <rosparam file="$(find ca_visual_odometry)/config/viso2.yaml" command="load"/>
      <remap from="image" to="raspicam/image_rect"/>
    </node>

    <!-- RViz -->
    <arg name="rviz" default="false"/>
    <include if="$(arg rviz)" file="$(find ca_tools)/launch/rviz.launch">
      <arg name="config_file" value="$(find ca_tools)/rviz/visual_odom.rviz"/>
    </include>
</launch>
